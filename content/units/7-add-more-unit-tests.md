# 任务 2：补充单元测试

理论上讲，有了前面讲的这套严谨的重构手法，我们很容易做到不改变软件的现有行为。不过一般而言，一套自动化的单元测试集可以帮助你更快地发现预期之外的改动，它可以很快给到你反馈。因此，在我们讲解下一步的重构之前，我们需要先确保有足够的测试保护。这节的任务是，补充单元测试。

还记得前面提醒大家思考的问题吗？**你如何保证重构过程不改变已有的软件行为呢**？一个是按照前面这套心法，严格遵循重构步骤和重构纪律；另一个，你还需要一套**自动化测试**来兜底。这套自动化测试集需要描述软件各个方面的行为、可以被自动化执行、并且运行速度需要快。

如果你跟我一样，采用了 TDD 的方式进行开发，那么你应该已经在完成项目的过程中，很自然地得到了这样的一套自动化测试集。这很好。如果你不是采用 TDD 的方式进行开发，在日常开发的过程中也没有写测试的习惯，那么我还是要推荐你学习一下熊节的[测试驱动开发实战营](https://plus.jiker.com/ying/8)。我们认为，**要得到一套能够支撑重构的自动化测试集，TDD 是唯一有效的方式**。

当然，如果你一时对 TDD 和单元测试还没有深入的了解，也没有关系。这节课的任务，就是带你先把（可能缺失的）单元测试补上。

【这里放一张图片】

## 你的任务

1. 观察前面的视频，依照类似的方式为你先前编写的代码编写单元测试
2. 在你的 IDE 或者控制台中把测试运行起来，并确保它们全部通过
3. 了解你所用的 IDE 运行测试的快捷键是什么，尝试用它来运行单元测试

对于已经习惯 TDD 的同学来说，这个任务应该比较简单，甚至已经在前面完成。如果你不确定一个单元测试应该怎么写，可以回头看看前面的视频，依样画葫芦。在观察和练习的过程中，我希望你思考一些问题：

- 你原来编写的代码，好加测试吗？为什么好加/不好加？
- 这些单元测试有什么特征？为什么测试应该这样写？
