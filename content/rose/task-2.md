# 任务 2：添加安全网

(笑) 同学们的重构事业进展如何？这坨代码跟某些项目的实际代码是不是十分相似？长长的函数，像俄罗斯套娃一样嵌套的 if 语句，缺乏有效的测试……拿到这种代码，你要做的第一件事是什么呢？

是先阅读代码，尝试理解逻辑？然而，祖传代码厉害就厉害在逻辑特别复杂，形式特别纠结。能被你猜懂读懂逻辑的代码…嗯通常来说重构的迫切性也还没那么大。

既然代码读不懂，那么读一下文档如何？然而你怎么知道代码实现的内容跟文档一一对应呢？你怎么确定你拿到的文档是不是缺少了某些更新呢？

同学说，那我先给它加上单元测试再进行重构！嗯，那可真算走对了路子。此时，祖传代码又向你露出了邪魅的微笑：嘿嘿嘿小兄弟，要是让你那么容易加上单元测试，我还当得起祖传代码的美名吗嘿嘿嘿…

嗯，的确，…

作为向祖传代码发起挑战的第一步，我们希望先拉起一张安全网，这张安全网需要有这样的特点：

- **必须很容易使用**。最好是按一个快捷键就能整个运行它，这样我们才可能频繁执行它
- **必须非常直观**。我们不想做人工的比对，最好是由它快速告诉我们测试是否失败

此外，你还需要严格遵循这个规则：**在安全网搭建好之前不能修改产品代码**。我们可不想意外地修改祖传遗产的行为。

【这里放一张图片】

## 你的任务

给镶金玫瑰商店的祖传代码编写自动化的测试安全网。

要求：

1. 不允许对产品代码做任何修改
2. 测试覆盖率不低于 95%
3. 能够通过一个快捷键运行测试
4. 能够自动化报告测试结果

## 反思

* 过程中有没有遇到纠结的情况？你纠结的地方是什么？
